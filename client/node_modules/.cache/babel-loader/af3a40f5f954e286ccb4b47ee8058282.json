{"ast":null,"code":"import _defineProperty from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/swagg187/Desktop/crest group version/Crest/client/src/components/Topstock/topstock.js\";\nimport React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport API from \"../../utils/API.js\";\nimport { DH_NOT_SUITABLE_GENERATOR } from \"constants\"; // import Conditiontable from \"./condition.js\"\n\nimport Jumbotron from \"../Jumbotron/index\"; //stock: [\"spy\",\"dai\",\"ndaq\",\"iwm\",\"aapl\", \"googl\", \"fb\"]\n//var stockArr =[];\n\nvar Topstock =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Topstock, _Component);\n\n  function Topstock() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Topstock);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Topstock)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      stockResponse: {},\n      newsResponse: [],\n      oneStockNews: [],\n      stock: [\"aapl\", \"googl\", \"fb\"],\n      endpoint: \"https://ws-api.iextrading.com/1.0/tops\"\n    };\n\n    _this.autoStockData = function () {\n      var symbols = _this.state.stock.join(\",\");\n\n      API.batchStock(symbols).then(function (res) {\n        console.log(\"res.data\");\n\n        _this.setState({\n          stockResponse: res.data\n        });\n      });\n    };\n\n    _this.autoNewsData = function () {\n      API.iexMarketNews().then(function (res) {\n        _this.setState({\n          newsResponse: res.data\n        });\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault(); // const stockTic = {\n      //     symbol: this.state.symbol,\n      // }\n\n      _this.setState({\n        symbol: _this.state.symbol\n      });\n\n      console.log(_this.state.symbol);\n      API.iexStockNews(_this.state.symbol).then(function (res) {\n        console.log(res.data);\n\n        _this.setState({\n          oneStockNews: res.data\n        });\n\n        _this.setState({\n          symbol: \"\"\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Topstock, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      //COMMENTED SOCKET IO QUOTES FOR NOW TO GET OTHER OPTIONS\n      // const{endpoint} = this.state;\n      // const socket = socketIOClient(endpoint);\n      // socket.on('connect', () => {\n      //     // Subscribe to topics (i.e. appl,fb,aig+)\n      //     //socket.on('message', message => console.log(message))\n      //     socket.emit('subscribe', this.state.stock.join(\",\"))\n      //     // Unsubscribe from topics (i.e. aig+)\n      //     //socket.emit('unsubscribe', 'aig+')\n      //     socket.on('message', (message) => {\n      //       //this.state.stockResponse.empty();\n      //       let livesymbol = JSON.parse(message)\n      //       stockArr.push(livesymbol);\n      //       this.setState({stockResponse:stockArr});\n      //       stockArr.length = 0;\n      //         //console.log((JSON.parse(message)));\n      //       })\n      //   })\n      // API.alphaVantageCall().then((res) => {\n      //     console.log(res)\n      // });   \n      this.intervalId = setInterval(this.autoStockData.bind(this), 1000); // this.newsIntervalId = setInterval(this.autoNewsData.bind(this), 60000);\n\n      this.autoNewsData();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.intervalId); // clearInterval(this.newsIntervalId);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      //const response = {};\n      var stockResponse = this.state; // const {symbol} = this.state;\n\n      console.log(this.state.stockResponse); //   console.log(this.state.newsResponse);\n      //console.log(this.state.response.symbol + this.state.response.lastSalePrice);\n\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: \"center\"\n        },\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.state.stockResponse ? React.createElement(\"div\", {\n        className: \"list-overflow-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"list-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, Object.keys(this.state.stockResponse).map(function (key, i) {\n        return React.createElement(\"li\", {\n          style: {\n            height: 60\n          },\n          key: i,\n          className: \"list-group-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          style: {\n            display: \"inline\",\n            float: \"left\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, _this2.state.stockResponse[key].quote.symbol, \" : \", _this2.state.stockResponse[key].quote.latestPrice.toFixed(2))), React.createElement(\"div\", {\n          style: {\n            display: \"inline\",\n            float: \"right\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          style: _this2.state.stockResponse[key].quote.change > 0 ? {\n            color: \"green\"\n          } : {\n            color: \"red\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, _this2.state.stockResponse[key].quote.change > 0 ? \"+\" + _this2.state.stockResponse[key].quote.change : _this2.state.stockResponse[key].quote.change))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          style: {\n            display: \"inlineBlock\",\n            float: \"middle\",\n            fontSize: 14\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, _this2.state.stockResponse[key].quote.companyName)));\n      }))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Loading...\"))), React.createElement(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleInputChange,\n        value: this.state.symbol,\n        name: \"symbol\",\n        placeholder: \"GOOG\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        className: \"btn btn-lg btn-info\",\n        onClick: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Get Stock News\")))), React.createElement(\"section\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginTop: 10,\n          height: 500,\n          overflow: \"auto\"\n        },\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"list-overflow-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, this.state.oneStockNews ? React.createElement(\"ul\", {\n        className: \"list-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.state.oneStockNews.map(function (news) {\n        return React.createElement(\"li\", {\n          className: \"list-group-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, news.headline)), React.createElement(\"a\", {\n          rel: \"noreferrer noopener\",\n          target: \"_blank\",\n          href: news.url,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"Read More...\"));\n      })) : React.createElement(\"h3\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"No News To Display\")))))), \"  \", React.createElement(\"div\", {\n        style: {\n          height: 1000,\n          overflow: \"auto\"\n        },\n        className: \"col-md-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"list-overflow-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, this.state.newsResponse ? React.createElement(\"ul\", {\n        className: \"list-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, this.state.newsResponse.map(function (news) {\n        return React.createElement(\"li\", {\n          className: \"list-group-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        }, news.headline)), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, news.summary)), React.createElement(\"a\", {\n          rel: \"noreferrer noopener\",\n          target: \"_blank\",\n          href: news.url,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \"Read More...\"));\n      })) : React.createElement(\"h3\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"No News To Display\"))), \"   \"));\n      {\n        /* Row div end\n        //           Stephane's merge for reference\n        //         <div style={{textAlign:\"center\"}} className=\"container\">\n        //         <Jumbotron />\n        //         <div style={{ textAlign: \"center\" }} className=\"row\">\n        //         <div className=\"col-md-4\">\n        //         {this.state.stockResponse\n        //            ? (\n        //         <div className=\"list-overflow-container\">\n        //           <ul className=\"list-group\">\n        //               {this.state.stockResponse.map((stock) => {\n        //                   return (\n        //                       <li key={stock.symbol} className=\"list-group-item\">\n        //                           <h3><span>{stock.symbol}</span></h3>\n        //                           <p><span>{stock.lastSalePrice}</span></p>\n        //                       </li>\n        //                   )})}\n        //           </ul>\n        //         </div>\n        //            )\n        //          : <div>Loading...</div>}\n        //         </div>\n        //         </div>\n        </div>\n          );   //map return function end\n        }\n        } */\n      }\n    }\n  }]);\n\n  return Topstock;\n}(Component);\n\nexport { Topstock as default };","map":{"version":3,"sources":["/Users/swagg187/Desktop/crest group version/Crest/client/src/components/Topstock/topstock.js"],"names":["React","Component","socketIOClient","API","DH_NOT_SUITABLE_GENERATOR","Jumbotron","Topstock","state","stockResponse","newsResponse","oneStockNews","stock","endpoint","autoStockData","symbols","join","batchStock","then","res","console","log","setState","data","autoNewsData","iexMarketNews","handleInputChange","event","target","name","value","handleFormSubmit","preventDefault","symbol","iexStockNews","intervalId","setInterval","bind","clearInterval","textAlign","Object","keys","map","key","i","height","display","float","quote","latestPrice","toFixed","change","color","fontSize","companyName","marginTop","overflow","news","headline","url","summary"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport API from \"../../utils/API.js\";\nimport { DH_NOT_SUITABLE_GENERATOR } from \"constants\";\n// import Conditiontable from \"./condition.js\"\nimport Jumbotron from \"../Jumbotron/index\";\n\n\n//stock: [\"spy\",\"dai\",\"ndaq\",\"iwm\",\"aapl\", \"googl\", \"fb\"]\n//var stockArr =[];\nexport default class Topstock extends Component {\n    state = {\n          stockResponse:{},\n          newsResponse:[],\n          oneStockNews:[],\n          stock: [\"aapl\", \"googl\", \"fb\"],\n          endpoint: \"https://ws-api.iextrading.com/1.0/tops\",\n        }\n    componentDidMount(){\n        //COMMENTED SOCKET IO QUOTES FOR NOW TO GET OTHER OPTIONS\n        // const{endpoint} = this.state;\n        // const socket = socketIOClient(endpoint);\n        // socket.on('connect', () => {\n        //     // Subscribe to topics (i.e. appl,fb,aig+)\n        //     //socket.on('message', message => console.log(message))\n        //     socket.emit('subscribe', this.state.stock.join(\",\"))\n        //     // Unsubscribe from topics (i.e. aig+)\n        //     //socket.emit('unsubscribe', 'aig+')\n        //     socket.on('message', (message) => {\n        //       //this.state.stockResponse.empty();\n        //       let livesymbol = JSON.parse(message)\n        //       stockArr.push(livesymbol);\n        //       this.setState({stockResponse:stockArr});\n        //       stockArr.length = 0;\n        //         //console.log((JSON.parse(message)));\n        //       })\n        //   })\n            // API.alphaVantageCall().then((res) => {\n            //     console.log(res)\n            // });   \n        this.intervalId = setInterval(this.autoStockData.bind(this), 1000);\n        // this.newsIntervalId = setInterval(this.autoNewsData.bind(this), 60000);\n        this.autoNewsData();\n      }\n      componentWillUnmount(){\n        clearInterval(this.intervalId);\n        // clearInterval(this.newsIntervalId);\n      }\n       autoStockData = () => {\n        let symbols = this.state.stock.join(\",\") \n        API.batchStock(symbols).then((res) => {\n            console.log(\"res.data\")\n            this.setState({stockResponse:res.data});\n           })\n        }\n        autoNewsData = () => {\n            API.iexMarketNews().then((res) => {\n                this.setState({newsResponse:res.data})\n            })\n        }\n\n        handleInputChange=(event) => {\n            const{name, value} = event.target;\n            this.setState({[name]: value});\n        }\n        handleFormSubmit = (event) => {\n            event.preventDefault();\n            // const stockTic = {\n            //     symbol: this.state.symbol,\n            // }\n            this.setState({symbol:this.state.symbol});\n            console.log(this.state.symbol);\n            API.iexStockNews(this.state.symbol).then((res) => {\n                console.log(res.data);\n                this.setState({oneStockNews: res.data});\n                this.setState({symbol:\"\"});\n            })\n        }\n\n    render(){\n      //const response = {};\n      const stockResponse = this.state;\n      // const {symbol} = this.state;\n        console.log(this.state.stockResponse);\n    //   console.log(this.state.newsResponse);\n      //console.log(this.state.response.symbol + this.state.response.lastSalePrice);\n      return(\n        <div className=\"container\">\n         <div  className=\"row\">\n     \n             <div style={{textAlign:\"center\"}} className=\"col-md-4\">\n             <div  className=\"row\">\n             <div className=\"col-md-12\">\n             {this.state.stockResponse\n                ? (\n             <div className=\"list-overflow-container\">\n               <ul className=\"list-group\">\n                   {Object.keys(this.state.stockResponse).map((key, i) => {\n                       return (\n                        <li style={{height:60}}key={i} className=\"list-group-item\">\n                        <div><h5 style={{display:\"inline\", float:\"left\"}}><span>{this.state.stockResponse[key].quote.symbol} : {this.state.stockResponse[key].quote.latestPrice.toFixed(2)}</span></h5>\n                        <div style={{display:\"inline\", float:\"right\"}}><h5 style={(this.state.stockResponse[key].quote.change > 0) ? {color:\"green\"} : {color:\"red\"}}>\n                        {this.state.stockResponse[key].quote.change > 0 ? (\"+\" + this.state.stockResponse[key].quote.change):(this.state.stockResponse[key].quote.change)}</h5>\n                        </div></div><br />\n                        <div><p style={{display:\"inlineBlock\", float:\"middle\", fontSize:14}}>{this.state.stockResponse[key].quote.companyName}</p></div>\n                    </li>\n                       )})}\n               </ul>\n             </div>\n                )\n              : <div>Loading...</div>}\n             </div>\n             </div>\n                    \n              {/* Form to get perticular stock news */}\n             <div  style={{marginTop:10}}className=\"row\">\n             <div className=\"col-md-12\">\n                 <form className=\"form\">\n                   <div className=\"form-group\">\n               {/* <label htmlFor=\"email\">Email:</label> */}\n                   <input type=\"text\"\n                     onChange={this.handleInputChange}\n                     value={this.state.symbol}\n                     name=\"symbol\"\n                     placeholder=\"GOOG\"/>\n                   </div>\n                 <button className=\"btn btn-lg btn-info\" onClick={this.handleFormSubmit}>Get Stock News</button>\n               </form>\n             </div>\n             </div>\n\n            {/* perticular stock news render */}\n            <section>\n             <div  style={{marginTop:10, height: 500, overflow:\"auto\"}} className=\"row\">\n             <div className=\"col-md-12\">\n                   <div className=\"list-overflow-container\">\n                     {this.state.oneStockNews ? (\n                           <ul className=\"list-group\">\n                             {this.state.oneStockNews.map((news) => {\n                             return (\n                                 <li className=\"list-group-item\">\n                                     <h3><span>{news.headline}</span></h3>\n                                     {/* <p><span>{news.summary}</span></p> */}\n                                     <a rel=\"noreferrer noopener\" target=\"_blank\" href={news.url}>Read More...</a>\n                                 </li>\n                             );\n                         })}\n                           </ul>\n                         ) : (\n                           <h3 className=\"container\">No News To Display</h3>\n                         )}\n                     </div>\n             </div>\n             </div>\n             </section>\n\n             </div>  {/* Col md 4 row end */}\n     \n               {/* Market News Rendering here */}\n               <div style={{height: 1000, overflow:\"auto\"}} className=\"col-md-8\">\n               <div className=\"list-overflow-container\">\n               {this.state.newsResponse ? (\n                     <ul className=\"list-group\">\n                       {this.state.newsResponse.map((news) => {\n                       return (\n                           <li className=\"list-group-item\">\n                               <h3><span>{news.headline}</span></h3>\n                               <p><span>{news.summary}</span></p>\n                               <a rel=\"noreferrer noopener\" target=\"_blank\" href={news.url}>Read More...</a>\n                           </li>\n                       );\n                   })}\n                     </ul>\n                   ) : (\n                     <h3 className=\"container\">No News To Display</h3>\n                   )}\n               </div>\n               </div>   {/*News Div End*/}\n\n\n\n        </div> \n        </div>\n        \n       );\n        {/* Row div end\n//           Stephane's merge for reference\n//         <div style={{textAlign:\"center\"}} className=\"container\">\n//         <Jumbotron />\n//         <div style={{ textAlign: \"center\" }} className=\"row\">\n//         <div className=\"col-md-4\">\n//         {this.state.stockResponse\n//            ? (\n//         <div className=\"list-overflow-container\">\n//           <ul className=\"list-group\">\n//               {this.state.stockResponse.map((stock) => {\n//                   return (\n//                       <li key={stock.symbol} className=\"list-group-item\">\n//                           <h3><span>{stock.symbol}</span></h3>\n//                           <p><span>{stock.lastSalePrice}</span></p>\n//                       </li>\n//                   )})}\n//           </ul>\n//         </div>\n//            )\n//          : <div>Loading...</div>}\n//         </div>\n//         </div>\n        </div>\n           );   //map return function end\n    }\n} */}}}\n"]},"metadata":{},"sourceType":"module"}