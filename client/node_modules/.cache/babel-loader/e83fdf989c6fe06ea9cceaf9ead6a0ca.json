{"ast":null,"code":"import _defineProperty from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/swagg187/Desktop/crest group version/Crest/client/src/components/Watchlist/Watchlist.js\";\nimport React, { Component } from \"react\";\nimport API from \"../../utils/API\";\nimport { Link, Router } from 'react-router-dom';\nimport socketIOClient from \"socket.io-client\";\nimport Jumbotron from \"../Jumbotron/index\";\nimport { MDBContainer, MDBMask, MDBView, MDBBtn, MDBCol, MDBRow, MDBCard, MDBCardBody, MDBCardTitle, MDBCardText, MDBIcon, MDBInput } from 'mdbreact';\nimport StaticAreaChart from \"../Charts/StaticAreaChart.js\"; //var stockArr =[];\n\nvar Watchlist =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Watchlist, _Component);\n\n  function Watchlist() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Watchlist);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Watchlist)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      stockResponse: {},\n      stock: [\"googl\", \"fb\"],\n      watchList: {},\n      watchListsymbol: \"\",\n      oneStockResponse: {},\n      responseLiveStock: [],\n      endpoint: \"https://ws-api.iextrading.com/1.0/tops\"\n    };\n\n    _this.getPertucularUserWatchList = function () {\n      API.getPertucularUserWatchList().then(function (res) {\n        _this.setState({\n          watchList: res.data\n        });\n\n        console.log(_this.state.watchList);\n      });\n    };\n\n    _this.handleWatchListInputChange = function (event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleWatchListFormSubmit = function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        watchListsymbol: _this.state.watchListsymbol\n      });\n\n      console.log(_this.state.watchListsymbol);\n      var data = {\n        id: _this.state.watchList.UserId,\n        stockSymbols: _this.state.watchList.stock + \",\" + _this.state.watchListsymbol.toLowerCase()\n      };\n      console.log(data);\n\n      _this.updateWatchList(data);\n\n      _this.setState({\n        watchListsymbol: \"\"\n      });\n    };\n\n    _this.updateWatchList = function (stockTicker) {\n      API.updatePertucularUserWatchList(stockTicker).then(function (res) {\n        console.log(res);\n\n        _this.getPertucularUserWatchList();\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.autoStockData = function () {\n      //console.log(this.state.watchList.stock);\n      //let symbols = this.state.stock.join(\",\") \n      API.batchStock(_this.state.watchList.stock).then(function (res) {\n        _this.setState({\n          stockResponse: res.data\n        });\n\n        console.log(_this.state.stockResponse);\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var _event$target2 = event.target,\n          name = _event$target2.name,\n          value = _event$target2.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault(); // const stockTic = {\n      //     symbol: this.state.symbol,\n      // }\n\n      _this.setState({\n        symbol: _this.state.symbol\n      });\n\n      _this.stockSymbol(_this.state.symbol);\n    };\n\n    _this.stockSymbol = function (symbol) {\n      API.singleStock(symbol).then(function (res) {\n        //this.props.history.replace('/home');  \n        _this.setState({\n          oneStockResponse: res\n        });\n\n        console.log(_this.state.oneStockResponse);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Watchlist, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getPertucularUserWatchList();\n      this.intervalId = setInterval(this.autoStockData.bind(this), 1000);\n    } //Clear interval on real time stock purchase when unmounting from this component\n    // componentWillUnmount(){\n    //   clearInterval(this.intervalId);\n    // }\n    //Clear interval when logging out or move to portfolio page or other page\n\n  }, {\n    key: \"intervalClear\",\n    value: function intervalClear() {\n      clearInterval(this.intervalId);\n    } //Get perticular user stock from database table stock\n\n  }, {\n    key: \"validateForm\",\n    //Form Validataion to check if symbol is entered or not \n    value: function validateForm() {\n      return this.state.symbol.length > 0;\n    } //Get info on one stock symbol\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var responseLiveStock = this.state.responseLiveStock;\n      var watchListsymbol = this.state;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row mt-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          marginTop: -25,\n          height: 500,\n          overflow: \"auto\"\n        },\n        className: \"col-md-12 mx-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        style: {\n          marginTop: 10\n        },\n        className: \"form text-center\",\n        onSubmit: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"col-md-8\",\n        type: \"text\",\n        onChange: this.handleWatchListInputChange,\n        value: this.state.watchListsymbol,\n        name: \"watchListsymbol\",\n        placeholder: \"Stock Symbol\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(MDBBtn, {\n        outline: true,\n        type: \"submit\",\n        color: \"elegant\",\n        className: \"mb-3\",\n        disabled: !this.validateForm,\n        onClick: this.handleWatchListFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Add to Watch List\")), this.state.stockResponse ? React.createElement(\"div\", {\n        className: \"list-overflow-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"list-group mb-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, Object.keys(this.state.stockResponse).reverse().map(function (key, i) {\n        return React.createElement(\"li\", {\n          style: {\n            height: 60\n          },\n          key: i,\n          className: \"list-group-item\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          style: {\n            display: \"inline\",\n            float: \"left\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, _this2.state.stockResponse[key].quote.symbol, \" : \", _this2.state.stockResponse[key].quote.latestPrice.toFixed(2))), React.createElement(\"div\", {\n          style: {\n            display: \"inline\",\n            float: \"right\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, React.createElement(\"h5\", {\n          style: _this2.state.stockResponse[key].quote.change > 0 ? {\n            color: \"green\"\n          } : {\n            color: \"red\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, _this2.state.stockResponse[key].quote.change > 0 ? \"+\" + _this2.state.stockResponse[key].quote.change : _this2.state.stockResponse[key].quote.change))), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          style: {\n            display: \"inlineBlock\",\n            float: \"middle\",\n            fontSize: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, _this2.state.stockResponse[key].quote.companyName)));\n      }))) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Loading...\")), \" \"), \" \");\n    } //Render End\n\n  }]);\n\n  return Watchlist;\n}(Component);\n\nexport { Watchlist as default };","map":{"version":3,"sources":["/Users/swagg187/Desktop/crest group version/Crest/client/src/components/Watchlist/Watchlist.js"],"names":["React","Component","API","Link","Router","socketIOClient","Jumbotron","MDBContainer","MDBMask","MDBView","MDBBtn","MDBCol","MDBRow","MDBCard","MDBCardBody","MDBCardTitle","MDBCardText","MDBIcon","MDBInput","StaticAreaChart","Watchlist","state","stockResponse","stock","watchList","watchListsymbol","oneStockResponse","responseLiveStock","endpoint","getPertucularUserWatchList","then","res","setState","data","console","log","handleWatchListInputChange","event","target","name","value","handleWatchListFormSubmit","preventDefault","id","UserId","stockSymbols","toLowerCase","updateWatchList","stockTicker","updatePertucularUserWatchList","catch","err","autoStockData","batchStock","handleInputChange","handleFormSubmit","symbol","stockSymbol","singleStock","intervalId","setInterval","bind","clearInterval","length","marginTop","height","overflow","validateForm","Object","keys","reverse","map","key","i","display","float","quote","latestPrice","toFixed","change","color","fontSize","companyName"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport API from \"../../utils/API\"\nimport { Link, Router } from 'react-router-dom';\nimport socketIOClient from \"socket.io-client\";\nimport Jumbotron from \"../Jumbotron/index\";\nimport { MDBContainer, MDBMask, MDBView, MDBBtn, MDBCol, MDBRow, MDBCard, MDBCardBody, MDBCardTitle, MDBCardText, MDBIcon, MDBInput } from 'mdbreact';\n\n\nimport StaticAreaChart from \"../Charts/StaticAreaChart.js\";\n\n//var stockArr =[];\nexport default class Watchlist extends Component {\n\n    state = {\n        stockResponse: {},\n        stock: [\"googl\", \"fb\"],\n        watchList: {},\n        watchListsymbol: \"\",\n        oneStockResponse: {},\n        responseLiveStock: [],\n        endpoint: \"https://ws-api.iextrading.com/1.0/tops\"\n    }\n\n    componentDidMount() {\n        this.getPertucularUserWatchList();\n        this.intervalId = setInterval(this.autoStockData.bind(this), 1000);\n    }\n\n    //Clear interval on real time stock purchase when unmounting from this component\n    // componentWillUnmount(){\n    //   clearInterval(this.intervalId);\n    // }\n\n    //Clear interval when logging out or move to portfolio page or other page\n    intervalClear() {\n        clearInterval(this.intervalId);\n    }\n\n    //Get perticular user stock from database table stock\n    getPertucularUserWatchList = () => {\n        API.getPertucularUserWatchList().then((res) => {\n            this.setState({ watchList: res.data });\n            console.log(this.state.watchList);\n        });\n    }\n\n    //Watch list input update in state\n    handleWatchListInputChange = (event) => {\n        const { name, value } = event.target;\n        this.setState({ [name]: value });\n    }\n    //Watch list submit button \n    handleWatchListFormSubmit = (event) => {\n        event.preventDefault();\n        this.setState({ watchListsymbol: this.state.watchListsymbol });\n        console.log(this.state.watchListsymbol);\n        const data = {\n            id: this.state.watchList.UserId,\n            stockSymbols: this.state.watchList.stock + \",\" + this.state.watchListsymbol.toLowerCase()\n        }\n        console.log(data);\n        this.updateWatchList(data);\n        this.setState({ watchListsymbol: \"\"})\n    }\n    updateWatchList = (stockTicker) => {\n        API.updatePertucularUserWatchList(stockTicker)\n            .then(res => {\n                console.log(res);\n                this.getPertucularUserWatchList();\n            })\n            .catch(err => console.log(err))\n    }\n\n    //Get Real time stock prices based on stocks in state stocks\n    autoStockData = () => {\n        //console.log(this.state.watchList.stock);\n        //let symbols = this.state.stock.join(\",\") \n        API.batchStock(this.state.watchList.stock).then((res) => {\n            this.setState({ stockResponse: res.data });\n            console.log(this.state.stockResponse);\n        })\n    }\n\n    //Input value updated in state\n    handleInputChange = (event) => {\n        const { name, value } = event.target;\n        this.setState({ [name]: value });\n    }\n\n    //Form Value submission to get once stock price \n    handleFormSubmit = (event) => {\n        event.preventDefault();\n        // const stockTic = {\n        //     symbol: this.state.symbol,\n        // }\n        this.setState({ symbol: this.state.symbol });\n        this.stockSymbol(this.state.symbol);\n    }\n\n    //Form Validataion to check if symbol is entered or not \n    validateForm() {\n        return this.state.symbol.length > 0;\n    }\n\n    //Get info on one stock symbol\n    stockSymbol = (symbol) => {\n        API.singleStock(symbol)\n            .then((res) => {\n                //this.props.history.replace('/home');  \n                this.setState({ oneStockResponse: res });\n                console.log(this.state.oneStockResponse)\n            })\n            .catch(err => console.log(err));\n    }\n    render() {\n        const { responseLiveStock } = this.state;\n        const watchListsymbol = this.state;\n        return (\n            <div className=\"container\">\n                <div className=\"row mt-5\">\n            \n                    {/*Live stock col md 4 for multiple sotcks */}\n                    <div style={{ marginTop: -25, height: 500, overflow: \"auto\" }} className=\"col-md-12 mx-auto\">\n                                                                                  \n                                  <form style={{ marginTop: 10 }} className=\"form text-center\" onSubmit={this.handleFormSubmit}>\n                                    <div className=\"form-group text-center\">\n                                      {/* <label htmlFor=\"email\">Email:</label> */}\n                                      <input className=\"col-md-8\" type=\"text\"\n                                          onChange={this.handleWatchListInputChange}\n                                          value={this.state.watchListsymbol}\n                                          name=\"watchListsymbol\"\n                                          placeholder=\"Stock Symbol\" />\n                                      </div>\n                                      <MDBBtn outline type=\"submit\" color=\"elegant\" className=\"mb-3\" disabled={!this.validateForm} onClick={this.handleWatchListFormSubmit}>Add to Watch List</MDBBtn>\n                                  </form>\n\n                        {this.state.stockResponse\n                            ? (\n                                <div className=\"list-overflow-container\">\n                                    <ul className=\"list-group mb-5\" >\n                                        {Object.keys(this.state.stockResponse).reverse().map((key, i) => {\n                                            return (\n                                                <li style={{ height: 60 }} key={i} className=\"list-group-item\">\n                                                    <div><h5 style={{ display: \"inline\", float: \"left\" }}><span>{this.state.stockResponse[key].quote.symbol} : {this.state.stockResponse[key].quote.latestPrice.toFixed(2)}</span></h5>\n                                                        <div style={{ display: \"inline\", float: \"right\" }}><h5 style={(this.state.stockResponse[key].quote.change > 0) ? { color: \"green\" } : { color: \"red\" }}>\n                                                            {this.state.stockResponse[key].quote.change > 0 ? (\"+\" + this.state.stockResponse[key].quote.change) : (this.state.stockResponse[key].quote.change)}</h5></div></div><br />\n                                                    <div><p style={{ display: \"inlineBlock\", float: \"middle\", fontSize: 10 }}>{this.state.stockResponse[key].quote.companyName}</p></div>\n                                                </li>\n                                            )\n                                        })}\n                                    </ul>\n                                </div>\n                            )\n                            : <div>Loading...</div>}\n                    </div> {/* 3rd col-md-4 div end */}\n                </div> {/* First Row Div End   */}\n\n            </div>)\n    }  //Render End\n}\n"]},"metadata":{},"sourceType":"module"}