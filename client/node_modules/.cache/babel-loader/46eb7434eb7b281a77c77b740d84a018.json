{"ast":null,"code":"import _classCallCheck from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/swagg187/Desktop/crest group version/Crest/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/swagg187/Desktop/crest group version/Crest/client/src/components/Portfolio/portfolio.js\";\nimport React, { Component } from \"react\";\nimport API from \"../../utils/API\";\nimport { Link, Router } from \"react-router-dom\";\nimport Jumbotron from \"../Jumbotron/index\";\nimport jsPDF from \"jspdf\";\nimport html2canvas from \"html2canvas\";\nimport 'jspdf-autotable';\nimport FolioPie from \"../Charts/FolioPie.js\"; // import FolioDoughnut from \"../Charts/FolioDoughnut.js\";\n\nvar Portfolio =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Portfolio, _Component);\n\n  function Portfolio() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Portfolio);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Portfolio)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      watchList: {},\n      portfolio: [],\n      updatePortfolio: [],\n      userPortfolio: [],\n      totalValue: 0 // chartData: []\n\n    };\n\n    _this.checkCash = function () {\n      console.log(\"check cash func hit\");\n      API.getCashValue().then(function (res) {\n        console.log(\"checkcash() \", res);\n        console.log(\"above is the res dot data from checkCash\");\n\n        _this.setState({\n          userCash: res.data\n        });\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.getUserPortfolio = function () {\n      API.getUserPortfolioData(_this.state.watchList.UserId).then(function (res) {\n        console.log(res.data); //this.setState({portfolio: res.data})\n\n        _this.setState({\n          updatePortfolio: res.data\n        });\n\n        var updatePort = res.data;\n        var updateWatchList = [];\n\n        _this.state.updatePortfolio.forEach(function (el) {\n          updateWatchList.push(el.symbol); //return updateWatchList\n        }); //const userWatchlist = this.state.updatePortfolio[this.state.updatePortfolio.length-1].symbols.join(\",\");\n        //console.log(updateWatchlist.join(\",\"));\n\n\n        API.batchStock(updateWatchList).then(function (res) {\n          //console.log(this.state.updatePortfolio);\n          //   console.log(res.data);\n          for (var k in res.data) {\n            //        console.log(k, res.data[k].quote.latestPrice);\n            for (var i = 0; i < updatePort.length; i++) {\n              if (k.toLowerCase() === updatePort[i].symbol) {\n                updatePort[i][\"latestPriceIEX\"] = res.data[k].quote.latestPrice;\n              }\n            }\n          } //   console.log(updatePort);\n\n\n          _this.setState({\n            userPortfolio: updatePort\n          });\n\n          _this.totalPortfolio(); //console.log(price);\n\n        });\n      });\n    };\n\n    _this.totalPortfolio = function () {\n      var totalStockValue = 0;\n\n      _this.state.userPortfolio.forEach(function (el) {\n        totalStockValue += parseInt(el.Stockquantity) * parseFloat(el.latestPriceIEX);\n      });\n\n      _this.setState({\n        totalValue: totalStockValue\n      });\n\n      console.log(_this.state.totalValue);\n    };\n\n    _this.logoutUser = function () {\n      //this.intervalClear();\n      localStorage.removeItem(\"loggedIn\");\n      API.signOutUser().then(function (res) {}).catch(function (err) {\n        return console.log(err);\n      });\n    };\n\n    _this.goToHomePage = function () {\n      _this.props.history.push(\"/home\");\n    };\n\n    _this.userTransaction = function () {\n      _this.props.history.push(\"/transactions\");\n    };\n\n    _this.printDocument = function () {\n      var input = document.getElementById('mytable');\n      html2canvas(input).then(function (canvas) {\n        var imgData = canvas.toDataURL('image/png', 1.0);\n        var pdf = new jsPDF('p', 'mm');\n        pdf.addImage(imgData, 'PNG', 10, 10); // pdf.output('dataurlnewwindow');\n\n        pdf.save(\"myDocument.pdf\");\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Portfolio, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      API.getPertucularUserWatchList().then(function (res) {\n        _this2.setState({\n          watchList: res.data\n        });\n      }).then(function () {\n        _this2.getUserPortfolio();\n\n        _this2.checkCash();\n      });\n    } //Check the cash value \n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var updateWatchList = this.state;\n      var totalValue = this.state;\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Jumbotron, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: '/login',\n        onClick: this.logoutUser.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Logout\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"\\xA0\\xA0\\xA0\\xA0\\xA0\"), React.createElement(Link, {\n        to: '/home',\n        onClick: this.goToHomePage.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Home\"), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"\\xA0\\xA0\\xA0\\xA0\"), React.createElement(Link, {\n        to: '/transactions',\n        onClick: this.userTransaction.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Transactions\")), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: this.printDocument.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Generate PDF Report\"), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.state.userPortfolio.length === 0 ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require('../../image.png'),\n        alt: \"stock\",\n        className: \"img-responsive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })) : React.createElement(\"table\", {\n        id: \"mytable\",\n        className: \"table table-striped\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"table-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Stock\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Quantity\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Live Stock Price\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Current Total Value\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Profit/Loss\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, this.state.userPortfolio.map(function (data) {\n        if (data.Stockquantity != 0) {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, data.symbol.toUpperCase())), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, data.Stockquantity), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, data.latestPriceIEX), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, parseFloat(data.Stockquantity) * data.latestPriceIEX.toFixed(2)), React.createElement(\"td\", {\n            style: parseFloat(data.Stockquantity) * data.latestPriceIEX > parseFloat(data.TotalPurchase) ? {\n              color: \"green\"\n            } : {\n              color: \"red\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160\n            },\n            __self: this\n          }, parseFloat(data.Stockquantity) * data.latestPriceIEX > parseFloat(data.TotalPurchase) ? (parseFloat(data.Stockquantity) * data.latestPriceIEX - parseFloat(data.TotalPurchase)).toFixed(2) : (parseFloat(data.TotalPurchase) - parseFloat(data.Stockquantity) * data.latestPriceIEX).toFixed(2)));\n        }\n      }))))))), React.createElement(\"div\", {\n        className: \"col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, this.state.userPortfolio.length === 0 ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Your Portfolio is Empty!\")) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(FolioPie, {\n        width: \"100%\",\n        height: \"600\",\n        data: this.state.userPortfolio,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })))), \" \", React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"table table-striped\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        className: \"table-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Intial Balance\"), React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Total Stock Value\"), React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Reamining Balance\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"$20000.00\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, this.state.totalValue.toFixed(2)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"???\"))))))) //Container Div End\n      ;\n    } //Return and Render-Method End\n\n  }]);\n\n  return Portfolio;\n}(Component); //Portfolio Class end \n\n\nexport { Portfolio as default };","map":{"version":3,"sources":["/Users/swagg187/Desktop/crest group version/Crest/client/src/components/Portfolio/portfolio.js"],"names":["React","Component","API","Link","Router","Jumbotron","jsPDF","html2canvas","FolioPie","Portfolio","state","watchList","portfolio","updatePortfolio","userPortfolio","totalValue","checkCash","console","log","getCashValue","then","res","setState","userCash","data","catch","err","getUserPortfolio","getUserPortfolioData","UserId","updatePort","updateWatchList","forEach","el","push","symbol","batchStock","k","i","length","toLowerCase","quote","latestPrice","totalPortfolio","totalStockValue","parseInt","Stockquantity","parseFloat","latestPriceIEX","logoutUser","localStorage","removeItem","signOutUser","goToHomePage","props","history","userTransaction","printDocument","input","document","getElementById","canvas","imgData","toDataURL","pdf","addImage","save","getPertucularUserWatchList","bind","require","map","toUpperCase","toFixed","TotalPurchase","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport API from \"../../utils/API\";\nimport { Link, Router } from \"react-router-dom\";\nimport Jumbotron from \"../Jumbotron/index\";\nimport jsPDF from \"jspdf\";\nimport html2canvas from \"html2canvas\";\nimport 'jspdf-autotable';\n\nimport FolioPie from \"../Charts/FolioPie.js\";\n// import FolioDoughnut from \"../Charts/FolioDoughnut.js\";\n\nexport default class Portfolio extends Component {\n    state = {\n        watchList: {},\n        portfolio: [],\n        updatePortfolio:[],\n        userPortfolio:[],\n        totalValue:0\n\n        // chartData: []\n    }\n    componentDidMount() {\n        API.getPertucularUserWatchList().then((res) => {\n            this.setState({ watchList: res.data });\n        }).then(() => {\n            this.getUserPortfolio();\n            this.checkCash();\n        });\n    }\n\n    //Check the cash value \n    checkCash = () => {\n            console.log(\"check cash func hit\");\n     API.getCashValue()\n         .then(res => {\n            console.log(\"checkcash() \", res);\n            console.log(\"above is the res dot data from checkCash\");\n            this.setState({userCash: res.data});\n        })\n        .catch(err => console.log(err))\n    \n     }\n\n\n    //API AJAX Call to user transaction table and generate user portfolio updated new table to get profit loss \n    getUserPortfolio = () => {\n        API.getUserPortfolioData(this.state.watchList.UserId).then((res) => {\n            console.log(res.data);\n            //this.setState({portfolio: res.data})\n            this.setState({ updatePortfolio: res.data })\n            const updatePort = res.data;\n            const updateWatchList = [];\n            this.state.updatePortfolio.forEach(function (el) {\n                updateWatchList.push(el.symbol)\n                //return updateWatchList\n            })\n\n            //const userWatchlist = this.state.updatePortfolio[this.state.updatePortfolio.length-1].symbols.join(\",\");\n            //console.log(updateWatchlist.join(\",\"));\n            API.batchStock(updateWatchList).then((res) => {\n                //console.log(this.state.updatePortfolio);\n                //   console.log(res.data);\n                for (let k in res.data) {\n                    //        console.log(k, res.data[k].quote.latestPrice);\n                    for (let i = 0; i < updatePort.length; i++) {\n                        if (k.toLowerCase() === updatePort[i].symbol) {\n                            updatePort[i][\"latestPriceIEX\"] = res.data[k].quote.latestPrice;\n                        }\n                    }\n               }\n            //   console.log(updatePort);\n                 this.setState({userPortfolio: updatePort})\n                 this.totalPortfolio();\n             //console.log(price);\n\n            })\n        })\n    }\n\n    totalPortfolio = () => {\n         let totalStockValue = 0;\n        this.state.userPortfolio.forEach(function(el){\n            totalStockValue +=(parseInt(el.Stockquantity)*parseFloat(el.latestPriceIEX));\n        })\n        this.setState({totalValue:totalStockValue});\n        console.log(this.state.totalValue);\n    }\n\n    //Logout User Link \n    logoutUser = () => {\n        //this.intervalClear();\n        localStorage.removeItem(\"loggedIn\");\n        API.signOutUser().then((res) => {\n        }).catch(err => console.log(err));\n    }\n    //Go to Home page\n    goToHomePage = () => {\n        this.props.history.push(\"/home\");\n    }\n    //Go to Transaction page when user clicked on Transactions link\n    userTransaction = () => {\n        this.props.history.push(\"/transactions\");\n    }\n\n    printDocument = () => {\n        const input = document.getElementById('mytable');\n        html2canvas(input)\n            .then((canvas) => {\n                const imgData = canvas.toDataURL('image/png', 1.0);\n                const pdf = new jsPDF('p', 'mm');\n                pdf.addImage(imgData, 'PNG', 10, 10);\n                // pdf.output('dataurlnewwindow');\n                pdf.save(\"myDocument.pdf\");\n            });\n    }\n\n    render() {\n        const updateWatchList = this.state;\n        const totalValue = this.state;\n        return (\n           \n             <div className=\"container\">\n             <Jumbotron />\n             <hr />\n             <div className=\"text-center\">\n                 <Link to={'/login'} onClick={this.logoutUser.bind(this)}>Logout</Link><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\n                 <Link to={'/home'} onClick={this.goToHomePage.bind(this)}>Home</Link><span>&nbsp;&nbsp;&nbsp;&nbsp;</span>\n                 <Link to={'/transactions'} onClick={this.userTransaction.bind(this)}>Transactions</Link>\n            </div>\n             <hr />\n             <div className=\"row\">\n                 <div className=\"col-md-6\">\n                     <div className=\"container\">\n                         {/* <Link to={'/portfolio'} onClick={this.userPortfolio.bind(this)}>Portfolio</Link><span>&nbsp;&nbsp;&nbsp;&nbsp;</span> */}\n                         <button className=\"btn btn-info\" onClick={this.printDocument.bind(this)}>Generate PDF Report</button>\n                         <hr></hr>\n                         <div className=\"row\">\n                             <div className=\"col-md-12\">\n                                 {(this.state.userPortfolio).length === 0 ? (<div><img src={require('../../image.png')} alt=\"stock\" className=\"img-responsive\" /></div>) : (\n                                     <table id=\"mytable\" className=\"table table-striped\">\n                                         <thead className=\"table-dark\">\n                                             <tr>\n                                                 <th scope=\"col\">Stock</th>\n                                                 <th scope=\"col\">Quantity</th>\n                                                 <th scope=\"col\">Live Stock Price</th>\n                                                 <th scope=\"col\">Current Total Value</th>\n                                                 <th scope=\"col\">Profit/Loss</th>\n                                                 {/* <th scope=\"col\">Purchase Date</th> */}\n                                             </tr>\n                                         </thead>\n                                         <tbody>\n                                             {this.state.userPortfolio.map((data) => {\n                                                if (data.Stockquantity != 0) {\n                                                 return (\n                                                     <tr>\n                                                         <td><b>{data.symbol.toUpperCase()}</b></td>\n                                                         <td>{data.Stockquantity}</td>\n                                                         <td>{data.latestPriceIEX}</td> \n                                                          <td>{(parseFloat(data.Stockquantity))*(data.latestPriceIEX).toFixed(2)}</td> \n                                                          <td style={((parseFloat(data.Stockquantity))*(data.latestPriceIEX)) > parseFloat(data.TotalPurchase) ? {color:\"green\"} : {color:\"red\"}}>{((parseFloat(data.Stockquantity))*(data.latestPriceIEX)) > parseFloat(data.TotalPurchase) ? (((parseFloat(data.Stockquantity))*(data.latestPriceIEX))-parseFloat(data.TotalPurchase)).toFixed(2) : (parseFloat(data.TotalPurchase)-(parseFloat(data.Stockquantity)*(data.latestPriceIEX))).toFixed(2)}</td> \n                                                     </tr>)\n                                                }\n                                             })}\n                                         </tbody>\n                                     </table>\n                                 )}\n                            </div>\n                         </div>\n                     </div>\n                 </div>\n                 {/* End of Stocklist column */}\n                 \n                <div className=\"col-md-6\">\n                        {this.state.userPortfolio.length === 0 ?\n                            (\n                                <div>\n                                    <p>Your Portfolio is Empty!</p>\n                                </div>\n                            )\n                            :\n                            (\n                                <div>\n                                    <FolioPie\n                                        width=\"100%\"\n                                        height=\"600\"\n                                        data={this.state.userPortfolio}\n                                    />\n                                    {/* <FolioDoughnut\n                                        width=\"100%\"\n                                        height=\"600\"\n                                        data={this.state.userPortfolio}\n                                    /> */}\n                                </div>\n                         )\n                     }\n                 </div>\n                 {/* End of Table column */}\n\n                 \n\n               </div> {/* Row div end */}\n\n               <div className=\"row\">\n               <div className=\"col-lg-12\">\n               <table>\n                   <thead className=\"table table-striped\">\n                   <tr className=\"table-dark\">\n                    <th scope=\"row\">Intial Balance</th>\n                    <th scope=\"row\">Total Stock Value</th>\n                    <th scope=\"row\">Reamining Balance</th>\n                   </tr>\n                   </thead>\n                   <tbody>\n                     <tr>\n                        <td>$20000.00</td>\n                        <td>{(this.state.totalValue).toFixed(2)}</td>\n                        {/* <td>{(parseFloat(20000.00)-parseFloat(this.state.totalValue)).toFixed(2)}</td> */}\n                        <td>???</td>\n                     </tr>\n                   </tbody>\n                </table>\n               \n                </div>\n               </div>\n\n           </div> //Container Div End\n\n        )\n    }   //Return and Render-Method End\n} //Portfolio Class end "]},"metadata":{},"sourceType":"module"}